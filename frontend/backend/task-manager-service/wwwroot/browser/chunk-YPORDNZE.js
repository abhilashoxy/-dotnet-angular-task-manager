import{Ba as x,Ia as S,Ja as E,Ka as t,La as i,Ma as F,Na as w,Oa as d,P as p,Pa as v,Qa as o,Ra as y,Sa as k,Ta as u,Ua as f,V as b,Va as g,W as _,a as M,ib as D,jb as h,pa as r,pb as C,qb as L,rb as N,sb as I,tb as V,ub as W,vb as P,wb as O,xb as A,ya as c,yb as j,zb as q}from"./chunk-O45LLBCF.js";var T=class m{http=p(C);task={id:0,title:"",description:"",isCompleted:!1};onSaved=()=>{};saveTask(){let a=this.task.id>0,n=`https://localhost:44361/api/tasks${a?"/"+this.task.id:""}`,e=a?"put":"post";this.http[e](n,this.task).subscribe({next:()=>{alert(a?"Task updated":"Task added"),this.onSaved(),this.task={id:0,title:"",description:"",isCompleted:!1}},error:l=>alert("Failed to save task")})}static \u0275fac=function(n){return new(n||m)};static \u0275cmp=c({type:m,selectors:[["app-task-form"]],inputs:{task:"task",onSaved:"onSaved"},decls:15,vars:4,consts:[[3,"ngSubmit"],[1,"mb-2"],["name","title","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","description","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check","mb-3"],["type","checkbox","name","isCompleted",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"form-check-label"],["type","submit",1,"btn","btn-primary"]],template:function(n,e){n&1&&(t(0,"form",0),d("ngSubmit",function(){return e.saveTask()}),t(1,"div",1)(2,"label"),o(3,"Title"),i(),t(4,"input",2),g("ngModelChange",function(s){return f(e.task.title,s)||(e.task.title=s),s}),i()(),t(5,"div",1)(6,"label"),o(7,"Description"),i(),t(8,"input",3),g("ngModelChange",function(s){return f(e.task.description,s)||(e.task.description=s),s}),i()(),t(9,"div",4)(10,"input",5),g("ngModelChange",function(s){return f(e.task.isCompleted,s)||(e.task.isCompleted=s),s}),i(),t(11,"label",6),o(12,"Completed"),i()(),t(13,"button",7),o(14),i()()),n&2&&(r(4),u("ngModel",e.task.title),r(4),u("ngModel",e.task.description),r(2),u("ngModel",e.task.isCompleted),r(4),k(" ",e.task.id>0?"Update":"Add"," Task "))},dependencies:[h,q,A,I,N,V,W,j,O,P],encapsulation:2})};function G(m,a){if(m&1){let n=w();t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td")(6,"span"),o(7),i()(),t(8,"td")(9,"button",6),d("click",function(){let l=b(n).$implicit,s=v();return _(s.editTask(l))}),o(10,"Edit"),i(),t(11,"button",7),d("click",function(){let l=b(n).$implicit,s=v();return _(s.deleteTask(l.id))}),o(12,"Delete"),i()()()}if(m&2){let n=a.$implicit;r(2),y(n.title),r(2),y(n.description),r(2),E("text-success",n.isCompleted)("text-danger",!n.isCompleted),r(),k(" ",n.isCompleted?"Completed":"Pending"," ")}}var B=class m{http=p(C);auth=p(L);selectedTask=null;tasks=[];ngOnInit(){this.getTasks()}getTasks(){this.http.get("https://localhost:44361/api/tasks").subscribe({next:a=>this.tasks=a,error:a=>alert("Failed to fetch tasks")})}logout(){this.auth.logout(),location.href="/login"}editTask(a){this.selectedTask=M({},a)}onTaskSaved(){this.selectedTask=null,this.getTasks()}deleteTask(a){confirm("Delete this task?")&&this.http.delete(`https://localhost:44361/api/tasks/${a}`).subscribe({next:()=>this.getTasks(),error:()=>alert("Delete failed")})}static \u0275fac=function(n){return new(n||m)};static \u0275cmp=c({type:m,selectors:[["app-task-list"]],decls:20,vars:3,consts:[[3,"task","onSaved"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"btn","btn-danger",3,"click"],[1,"table","table-bordered"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"]],template:function(n,e){n&1&&(F(0,"app-task-form",0)(1,"hr"),t(2,"div",1)(3,"h2"),o(4,"Task List"),i(),t(5,"button",2),d("click",function(){return e.logout()}),o(6,"Logout"),i()(),t(7,"table",3)(8,"thead",4)(9,"tr")(10,"th"),o(11,"Title"),i(),t(12,"th"),o(13,"Description"),i(),t(14,"th"),o(15,"Status"),i(),t(16,"th"),o(17,"Actions"),i()()(),t(18,"tbody"),x(19,G,13,7,"tr",5),i()()),n&2&&(S("task",e.selectedTask)("onSaved",e.onTaskSaved.bind(e)),r(19),S("ngForOf",e.tasks))},dependencies:[h,D,T],encapsulation:2})};export{B as TaskListComponent};
